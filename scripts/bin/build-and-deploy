#!/bin/bash

cd $WEBSITE_DIRECTORY

git pull origin

docker build . -t carberra/website:$1

if [ $? -ne 0 ]; then
  echo "Failure during build process"
  exit 1
fi

docker inspect --format="running" carberra-website

if [ $? -eq 0 ]; then
  docker stop carberra-website
fi

docker run -p 3000:3000 --name carberra-website --rm -d carberra/website:$1
